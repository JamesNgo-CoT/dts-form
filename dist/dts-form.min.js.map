{"version":3,"sources":["dts-form.min.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","window","dts","Backbone","Collection","Model","View","Base","extend","chainEvent","add","models","opts","_this","this","l","model","listenTo","trigger","call","remove","stopListening","reset","attributeTypes","set","attr","opts2","_this2","k","hasOwnProperty","args","Function","bind","apply","Boolean","concat","valueOf","Number","String","_loop","_k","get","toJSON","json"],"mappings":"AAAA,aAEA,IAAIA,QAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUC,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXF,QAAyBE,EAAIC,cAAgBH,QAAUE,IAAQF,OAAOI,UAAY,gBAAkBF,GAEtQ,SAASG,mBAAmBC,GAAO,GAAIC,MAAMC,QAAQF,GAAM,CAAE,IAAK,IAAIG,EAAI,EAAGC,EAAOH,MAAMD,EAAIK,QAASF,EAAIH,EAAIK,OAAQF,IAAOC,EAAKD,GAAKH,EAAIG,GAAM,OAAOC,EAAe,OAAOH,MAAMK,KAAKN,GAE1L,SAASO,gBAAgBX,EAAKY,EAAKC,GAAiK,OAApJD,KAAOZ,EAAOc,OAAOC,eAAef,EAAKY,GAAOC,MAAOA,EAAOG,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBlB,EAAIY,GAAOC,EAAgBb,EAK3MmB,OAAOC,IAAMD,OAAOC,QAIpBA,IAAIC,SAAWD,IAAIC,aACnBD,IAAIC,SAASC,WAAaF,IAAIC,SAASC,eACvCF,IAAIC,SAASE,MAAQH,IAAIC,SAASE,UAClCH,IAAIC,SAASG,KAAOJ,IAAIC,SAASG,SAIjCJ,IAAIC,SAASC,WAAWG,KAAOJ,SAASC,WAAWI,QACjDC,YAAY,EAEZC,IAAK,SAAaC,EAAQC,GACxB,IAAIC,EAAQC,KAEZ,GAAIH,GAAUG,KAAKL,WAAY,CACxBtB,MAAMC,QAAQuB,KACjBA,GAAUA,IAGZ,IAAK,IADDI,EAAIJ,EAAOpB,OACNF,EAAI,EAAGA,EAAI0B,EAAG1B,IACfsB,EAAOtB,aAAcyB,KAAKE,OAASL,EAAOtB,aAAcc,SAASE,QACrEM,EAAOtB,GAAK,IAAIyB,KAAKE,MAAML,EAAOtB,KAEpCyB,KAAKG,SAASN,EAAOtB,GAAI,SAAU,WACjCwB,EAAMK,QAAQ,YAIpBf,SAASC,WAAWpB,UAAU0B,IAAIS,KAAKL,KAAMH,EAAQC,IAGvDQ,OAAQ,SAAgBT,EAAQC,GAC9B,GAAID,GAAUG,KAAKL,WAAY,CACxBtB,MAAMC,QAAQuB,KACjBA,GAAUA,IAGZ,IAAK,IADDI,EAAIJ,EAAOpB,OACNF,EAAI,EAAGA,EAAI0B,EAAG1B,KACjBsB,EAAOtB,aAAcyB,KAAKE,OAASL,EAAOtB,aAAcc,SAASE,QACnES,KAAKO,cAAcV,EAAOtB,GAAI,UAIpCc,SAASC,WAAWpB,UAAUoC,OAAOD,KAAKL,KAAMH,EAAQC,IAG1DU,MAAO,SAAeX,EAAQC,GACxBE,KAAKL,YACPK,KAAKO,gBAEPlB,SAASC,WAAWpB,UAAUsC,MAAMH,KAAKL,KAAMH,EAAQC,MAM3DV,IAAIC,SAASE,MAAME,KAAOJ,SAASE,MAAMG,QACvCe,kBAEAd,YAAY,EAEZe,IAAK,SAAaC,EAAMb,EAAMc,GAC5B,IAAIC,EAASb,KAGO,iBAATW,IACTA,EAAOhC,mBAAoBgC,EAAMb,GACjCA,EAAOc,GAIT,IAAK,IAAIE,KAAKd,KAAKS,eACjB,GAAIT,KAAKS,eAAeM,eAAeD,IAAgC,MAA1Bd,KAAKS,eAAeK,IAAcH,EAAKI,eAAeD,IAAiB,MAAXH,EAAKG,GAAY,CACxH,IAAIE,EAAO3C,MAAMC,QAAQqC,EAAKG,IAAMH,EAAKG,IAAMH,EAAKG,IAEpD,GAAsC,iBAA3Bd,KAAKS,eAAeK,IAAmBjD,QAAQ8C,EAAKG,MAAQd,KAAKS,eAAeK,GACzF,OAAQd,KAAKS,eAAeK,IAC1B,IAAK,UACHH,EAAKG,IAAK,IAAKG,SAAS/C,UAAUgD,KAAKC,MAAMC,SAAU,MAAMC,OAAOlD,mBAAmB6C,OAAWM,UAClG,MAEF,IAAK,SACHX,EAAKG,IAAK,IAAKG,SAAS/C,UAAUgD,KAAKC,MAAMI,QAAS,MAAMF,OAAOlD,mBAAmB6C,OAAWM,UACjG,MAEF,IAAK,SACHX,EAAKG,IAAK,IAAKG,SAAS/C,UAAUgD,KAAKC,MAAMK,QAAS,MAAMH,OAAOlD,mBAAmB6C,OAAWM,UACjG,MAEF,IAAK,WACHX,EAAKG,GAAK,IAAKG,SAAS/C,UAAUgD,KAAKC,MAAMF,UAAW,MAAMI,OAAOlD,mBAAmB6C,UAGjD,mBAA3BhB,KAAKS,eAAeK,IAAuBH,EAAKG,aAAcd,KAAKS,eAAeK,KAClGH,EAAKG,GAAK,IAAKG,SAAS/C,UAAUgD,KAAKC,MAAMnB,KAAKS,eAAeK,IAAK,MAAMO,OAAOlD,mBAAmB6C,OAM5G,GAAIhB,KAAKL,WAAY,CACnB,IAAI8B,EAAQ,SAAeC,GAGrBb,EAAOc,IAAID,aAAerC,SAASE,MACrCsB,EAAON,cAAcM,EAAOc,IAAID,GAAK,UAC5Bb,EAAOc,IAAID,aAAerC,SAASC,aAC5CuB,EAAON,cAAcM,EAAOc,IAAID,GAAK,SACrCb,EAAON,cAAcM,EAAOc,IAAID,GAAK,QACrCb,EAAON,cAAcM,EAAOc,IAAID,GAAK,WAInCf,EAAKe,aAAerC,SAASE,MAC/BsB,EAAOV,SAASQ,EAAKe,GAAK,SAAU,WAClCb,EAAOT,QAAQ,UACfS,EAAOT,QAAQ,UAAYsB,KAEpBf,EAAKe,aAAerC,SAASC,aACtCuB,EAAOV,SAASQ,EAAKe,GAAK,QAAS,WACjCb,EAAOT,QAAQ,UACfS,EAAOT,QAAQ,UAAYsB,KAE7Bb,EAAOV,SAASQ,EAAKe,GAAK,OAAQ,WAChCb,EAAOT,QAAQ,UACfS,EAAOT,QAAQ,UAAYsB,KAE7Bb,EAAOV,SAASQ,EAAKe,GAAK,SAAU,WAClCb,EAAOT,QAAQ,UACfS,EAAOT,QAAQ,UAAYsB,OAKjC,IAAK,IAAIA,KAAMf,EACbc,EAAMC,GAIV,OAAOrC,SAASE,MAAMrB,UAAUwC,IAAIL,KAAKL,KAAMW,EAAMb,IAGvD8B,OAAQ,SAAgB9B,GACtB,IAAI+B,EAAOxC,SAASE,MAAMrB,UAAU0D,OAAOvB,KAAKL,KAAMF,GAEtD,IAAK,IAAIgB,KAAKe,EACRA,EAAKd,eAAeD,IAAiB,MAAXe,EAAKf,KAAee,EAAKf,aAAczB,SAASE,OAASsC,EAAKf,aAAczB,SAASC,cACjHuC,EAAKf,GAAKe,EAAKf,GAAGc,OAAO9B,IAI7B,OAAO+B,KAMXzC,IAAIC,SAASG,KAAKC,KAAOJ,SAASG,KAAKE","file":"dts-form.min.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* global Backbone */\n\n/* global dts */\nwindow.dts = window.dts || {};\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone = dts.Backbone || {};\ndts.Backbone.Collection = dts.Backbone.Collection || {};\ndts.Backbone.Model = dts.Backbone.Model || {};\ndts.Backbone.View = dts.Backbone.View || {};\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone.Collection.Base = Backbone.Collection.extend({\n  chainEvent: true,\n\n  add: function add(models, opts) {\n    var _this = this;\n\n    if (models && this.chainEvent) {\n      if (!Array.isArray(models)) {\n        models = [models];\n      }\n      var l = models.length;\n      for (var i = 0; i < l; i++) {\n        if (!(models[i] instanceof this.model || models[i] instanceof Backbone.Model)) {\n          models[i] = new this.model(models[i]);\n        }\n        this.listenTo(models[i], 'change', function () {\n          _this.trigger('update');\n        });\n      }\n    }\n    Backbone.Collection.prototype.add.call(this, models, opts);\n  },\n\n  remove: function remove(models, opts) {\n    if (models && this.chainEvent) {\n      if (!Array.isArray(models)) {\n        models = [models];\n      }\n      var l = models.length;\n      for (var i = 0; i < l; i++) {\n        if (models[i] instanceof this.model || models[i] instanceof Backbone.Model) {\n          this.stopListening(models[i], 'change');\n        }\n      }\n    }\n    Backbone.Collection.prototype.remove.call(this, models, opts);\n  },\n\n  reset: function reset(models, opts) {\n    if (this.chainEvent) {\n      this.stopListening();\n    }\n    Backbone.Collection.prototype.reset.call(this, models, opts);\n  }\n});\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone.Model.Base = Backbone.Model.extend({\n  attributeTypes: {},\n\n  chainEvent: true,\n\n  set: function set(attr, opts, opts2) {\n    var _this2 = this;\n\n    // Parpare data.\n    if (typeof attr === 'string') {\n      attr = _defineProperty({}, attr, opts);\n      opts = opts2;\n    }\n\n    // Format data.\n    for (var k in this.attributeTypes) {\n      if (this.attributeTypes.hasOwnProperty(k) && this.attributeTypes[k] != null && attr.hasOwnProperty(k) && attr[k] != null) {\n        var args = Array.isArray(attr[k]) ? attr[k] : [attr[k]];\n\n        if (typeof this.attributeTypes[k] === 'string' && _typeof(attr[k]) !== this.attributeTypes[k]) {\n          switch (this.attributeTypes[k]) {\n            case 'boolean':\n              attr[k] = new (Function.prototype.bind.apply(Boolean, [null].concat(_toConsumableArray(args))))().valueOf();\n              break;\n\n            case 'number':\n              attr[k] = new (Function.prototype.bind.apply(Number, [null].concat(_toConsumableArray(args))))().valueOf();\n              break;\n\n            case 'string':\n              attr[k] = new (Function.prototype.bind.apply(String, [null].concat(_toConsumableArray(args))))().valueOf();\n              break;\n\n            case 'function':\n              attr[k] = new (Function.prototype.bind.apply(Function, [null].concat(_toConsumableArray(args))))();\n              break;\n          }\n        } else if (typeof this.attributeTypes[k] === 'function' && !(attr[k] instanceof this.attributeTypes[k])) {\n          attr[k] = new (Function.prototype.bind.apply(this.attributeTypes[k], [null].concat(_toConsumableArray(args))))();\n        }\n      }\n    }\n\n    // Manage event chain.\n    if (this.chainEvent) {\n      var _loop = function _loop(_k) {\n\n        // Remove event chain.\n        if (_this2.get(_k) instanceof Backbone.Model) {\n          _this2.stopListening(_this2.get(_k), 'change');\n        } else if (_this2.get(_k) instanceof Backbone.Collection) {\n          _this2.stopListening(_this2.get(_k), 'reset');\n          _this2.stopListening(_this2.get(_k), 'sort');\n          _this2.stopListening(_this2.get(_k), 'update');\n        }\n\n        // Add event chain.\n        if (attr[_k] instanceof Backbone.Model) {\n          _this2.listenTo(attr[_k], 'change', function () {\n            _this2.trigger('change');\n            _this2.trigger('change:' + _k);\n          });\n        } else if (attr[_k] instanceof Backbone.Collection) {\n          _this2.listenTo(attr[_k], 'reset', function () {\n            _this2.trigger('change');\n            _this2.trigger('change:' + _k);\n          });\n          _this2.listenTo(attr[_k], 'sort', function () {\n            _this2.trigger('change');\n            _this2.trigger('change:' + _k);\n          });\n          _this2.listenTo(attr[_k], 'update', function () {\n            _this2.trigger('change');\n            _this2.trigger('change:' + _k);\n          });\n        }\n      };\n\n      for (var _k in attr) {\n        _loop(_k);\n      }\n    }\n\n    return Backbone.Model.prototype.set.call(this, attr, opts);\n  },\n\n  toJSON: function toJSON(opts) {\n    var json = Backbone.Model.prototype.toJSON.call(this, opts);\n\n    for (var k in json) {\n      if (json.hasOwnProperty(k) && json[k] != null && (json[k] instanceof Backbone.Model || json[k] instanceof Backbone.Collection)) {\n        json[k] = json[k].toJSON(opts);\n      }\n    }\n\n    return json;\n  }\n});\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone.View.Base = Backbone.View.extend({});"]}