{"version":3,"sources":["dts-form.min.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","window","dts","Backbone","Collection","Model","View","Base","extend","chainEvent","add","models","opts","call","attributeTypes","set","attr","opts2","_this","this","k","hasOwnProperty","args","Function","bind","apply","Boolean","concat","valueOf","Number","String","_loop","_k","get","stopListening","listenTo","trigger","toJSON","json"],"mappings":"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","file":"dts-form.min.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nwindow.dts = window.dts || {};\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone = dts.Backbone || {};\ndts.Backbone.Collection = dts.Backbone.Collection || {};\ndts.Backbone.Model = dts.Backbone.Model || {};\ndts.Backbone.View = dts.Backbone.View || {};\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone.Collection.Base = Backbone.Collection.extend({\n  chainEvent: true,\n\n  add: function add(models, opts) {\n    return Backbone.Collection.prototype.add.call(models, opts);\n  }\n});\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone.Model.Base = Backbone.Model.extend({\n  attributeTypes: {},\n\n  chainEvent: true,\n\n  set: function set(attr, opts, opts2) {\n    var _this = this;\n\n    if (typeof attr === 'string') {\n      attr = _defineProperty({}, attr, opts);\n      opts = opts2;\n    }\n\n    for (var k in this.attributeTypes) {\n      if (this.attributeTypes.hasOwnProperty(k) && this.attributeTypes[k] != null && attr.hasOwnProperty(k) && attr[k] != null) {\n        var args = Array.isArray(attr[k]) ? attr[k] : [attr[k]];\n\n        if (typeof this.attributeTypes[k] === 'string' && _typeof(attr[k]) !== this.attributeTypes[k]) {\n          switch (this.attributeTypes[k]) {\n            case 'boolean':\n              attr[k] = new (Function.prototype.bind.apply(Boolean, [null].concat(_toConsumableArray(args))))().valueOf();\n              break;\n\n            case 'number':\n              attr[k] = new (Function.prototype.bind.apply(Number, [null].concat(_toConsumableArray(args))))().valueOf();\n              break;\n\n            case 'string':\n              attr[k] = new (Function.prototype.bind.apply(String, [null].concat(_toConsumableArray(args))))().valueOf();\n              break;\n\n            case 'function':\n              attr[k] = new (Function.prototype.bind.apply(Function, [null].concat(_toConsumableArray(args))))();\n              break;\n          }\n        } else if (typeof this.attributeTypes[k] === 'function' && !(attr[k] instanceof this.attributeTypes[k])) {\n          attr[k] = new (Function.prototype.bind.apply(this.attributeTypes[k], [null].concat(_toConsumableArray(args))))();\n        }\n      }\n    }\n\n    if (this.chainEvent) {\n      var _loop = function _loop(_k) {\n        if (_this.get(_k) instanceof Backbone.Model) {\n          _this.stopListening(attr[_k], 'change');\n        } else if (_this.get(_k) instanceof Backbone.Collection) {\n          _this.stopListening(attr[_k], 'update');\n        }\n\n        if (attr[_k] instanceof Backbone.Model) {\n          _this.listenTo(attr[_k], 'change', function () {\n            _this.trigger('change');\n            _this.trigger('change:' + _k);\n          });\n        } else if (attr[_k] instanceof Backbone.Collection) {\n          _this.listenTo(attr[_k], 'update', function () {\n            _this.trigger('change');\n            _this.trigger('change:' + _k);\n          });\n        }\n      };\n\n      for (var _k in attr) {\n        _loop(_k);\n      }\n    }\n\n    return Backbone.Model.prototype.set.call(this, attr, opts);\n  },\n\n  toJSON: function toJSON(opts) {\n    var json = Backbone.Model.prototype.toJSON.call(this, opts);\n\n    for (var k in json) {\n      if (json.hasOwnProperty(k) && json[k] != null && (json[k] instanceof Backbone.Model || json[k] instanceof Backbone.Collection)) {\n        json[k] = json[k].toJSON(opts);\n      }\n    }\n\n    return json;\n  }\n});\n\n////////////////////////////////////////////////////////////////////////////////\n\ndts.Backbone.View.Base = Backbone.View.extend({});"]}